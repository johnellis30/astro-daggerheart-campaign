---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';
import { getCollection } from 'astro:content';

// Get content counts from new collections
const characters = await getCollection('characters');
const locations = await getCollection('locations');
const adventures = await getCollection('adventures');
const monsters = await getCollection('monsters');
const items = await getCollection('items');
const campaign = await getCollection('campaign');
const environments = await getCollection('environments');

const characterCount = characters.length;
const locationCount = locations.length + environments.length; // Include environments in locations
const adventureCount = adventures.length;
const monsterCount = monsters.length;
const itemCount = items.length;
const campaignCount = campaign.length;
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
		<style>
			.hero {
				text-align: center;
				margin: 2rem 0 3rem;
			}
			.hero h1 {
				font-size: 3rem;
				color: rgb(var(--black));
				margin-bottom: 1rem;
			}
			.hero p {
				font-size: 1.2rem;
				color: rgb(var(--gray));
				max-width: 600px;
				margin: 0 auto;
			}
			.categories {
				display: grid;
				grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
				gap: 2rem;
				margin: 3rem 0;
			}
			.category-card {
				background: white;
				border-radius: 12px;
				padding: 2rem;
				text-align: center;
				text-decoration: none;
				transition: 0.2s ease;
				border: 1px solid rgb(var(--gray-light));
				box-shadow: 0 2px 8px rgba(var(--black), 5%);
			}
			.category-card:hover {
				transform: translateY(-2px);
				box-shadow: 0 8px 25px rgba(var(--black), 15%);
			}
			.category-card h3 {
				font-size: 1.5rem;
				color: rgb(var(--black));
				margin-bottom: 0.5rem;
			}
			.category-card p {
				color: rgb(var(--gray));
				margin-bottom: 1rem;
			}
			.category-count {
				background: rgb(var(--accent));
				color: white;
				padding: 0.25rem 0.75rem;
				border-radius: 20px;
				font-size: 0.9rem;
				font-weight: bold;
			}
			@media (max-width: 720px) {
				.categories {
					grid-template-columns: 1fr;
					gap: 1rem;
				}
				.hero h1 {
					font-size: 2rem;
				}
			}
		</style>
	</head>
	<body>
		<Header />
		<main>
			<div class="hero">
				<h1>Daggerheart Campaign</h1>
				<p>
					Explore the world of Eldoria through its characters, locations, adventures, and lore. 
					Navigate using the categories below to discover the rich content of our campaign setting.
				</p>
			</div>
			
			<div class="categories">
				<a href="/characters" class="category-card">
					<h3>Characters</h3>
					<p>NPCs and notable figures in the campaign world</p>
					<span class="category-count">{characterCount} entries</span>
				</a>
				
				<a href="/locations" class="category-card">
					<h3>Locations</h3>
					<p>Places and environments to explore</p>
					<span class="category-count">{locationCount} entries</span>
				</a>
				
				<a href="/adventures" class="category-card">
					<h3>Adventures</h3>
					<p>Quests and story arcs in the campaign</p>
					<span class="category-count">{adventureCount} entries</span>
				</a>
				
				<a href="/monsters" class="category-card">
					<h3>Monsters</h3>
					<p>Adversaries and creatures to encounter</p>
					<span class="category-count">{monsterCount} entries</span>
				</a>
				
				<a href="/items" class="category-card">
					<h3>Items</h3>
					<p>Treasures and artifacts to discover</p>
					<span class="category-count">{itemCount} entries</span>
				</a>
				
				<a href="/campaign" class="category-card">
					<h3>Campaign</h3>
					<p>Lore, background, and world information</p>
					<span class="category-count">{campaignCount} entries</span>
				</a>
			</div>
		</main>
		<Footer />
	</body>
</html>
